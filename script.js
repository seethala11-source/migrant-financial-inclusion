/* Localization dictionary (en, hi, ta) */
const i18n = {
  en: {
    site_title: "Migrant Workers & Financial Inclusion",
    nav_why: "Why",
    nav_challenges: "Challenges",
    nav_solutions: "Solutions",
    nav_data: "Data",
    nav_cases: "Case Studies",
    nav_policy: "Policy",
    nav_resources: "Resources",
    nav_faq: "FAQ",
    nav_contact: "Contact",
    lang_label: "Language",
    hero_title: "Migrant Workers & Financial Inclusion",
    hero_sub: "Exploring barriers, data insights, and practical solutions to enable safe, affordable, and portable financial services for migrant communities.",
    hero_cta: "Start Exploring",
    hero_glance: "At a glance",
    hero_pt1: "Access to accounts & savings",
    hero_pt2: "Low-cost remittances",
    hero_pt3: "Digital payments & eKYC",
    hero_pt4: "Financial literacy & protection",
    why_title: "Why Financial Inclusion for Migrant Workers?",
    why_p: "Migrant workers contribute significantly to local economies and send vital remittances. Inclusive finance supports resilience, safe transfers, and long-term mobility.",
    why_card1_h: "Economic Security",
    why_card1_p: "Savings accounts and insurance reduce vulnerability to shocks.",
    why_card2_h: "Safe Remittances",
    why_card2_p: "Affordable digital rails reduce risk compared to informal channels.",
    why_card3_h: "Portability",
    why_card3_p: "Interoperable systems enable access across locations and employers.",
    why_card4_h: "Consumer Protection",
    why_card4_p: "Transparent fees, grievance redressal, and privacy safeguards.",
    challenges_title: "Key Challenges",
    ch_kyc_h: "KYC & Documentation:",
    ch_kyc_p: "Lack of address proof or ID portability.",
    ch_cost_h: "Remittance Costs:",
    ch_cost_p: "Fees and hidden charges for transfers.",
    ch_digi_h: "Digital & Language Gaps:",
    ch_digi_p: "Low literacy, unfamiliar interfaces.",
    ch_informal_h: "Informal Work:",
    ch_informal_p: "Irregular income, employer-controlled payments.",
    ch_gender_h: "Gendered Barriers:",
    ch_gender_p: "Access and agency for women migrants.",
    ch_field_h: "Field-Level Issues",
    ch_field_p1: "Examples to investigate in your project:",
    ch_field_li1: "Account opening delays for interstate workers",
    ch_field_li2: "Cash-out availability at destination",
    ch_field_li3: "Agent availability and reliability",
    ch_field_li4: "Fraud/overcharging risks at kiosks",
    solutions_title: "Solutions & Innovations",
    sol1_h: "Zero-Balance/No-Frills Accounts",
    sol1_p: "Tiered KYC with transaction limits for faster onboarding (eKYC where allowed).",
    sol2_h: "Digital KYC & Interoperability",
    sol2_p: "Interoperable payments, portable benefits across states; UPI scale in India illustrates adoption.",
    sol3_h: "Agent & Merchant Networks",
    sol3_p: "Cash-in/out points near worksites; multilingual UX; clear grievance redressal.",
    data_title: "Data & Visualizations",
    data_note: "Charts use latest available sources. See citations & dates in Resources.",
    chart1_title: "Account Ownership (% of adults), 2024: India vs South Asia vs World",
    chart2_title: "Global Average Remittance Cost (% of US$200)",
    data_disclaimer_h: "Note:",
    data_disclaimer_p: "Comprehensive, nationally representative “migrant-only” account ownership stats are limited; hence we compare India/South Asia/World benchmarks and show remittance cost trends as a core barrier affecting migrants.",
    cases_title: "Case Studies",
    case1_h: "Digitizing Remittances for Interstate Workers",
    case1_p: "Employers partnering with banks/FinTechs to open on-site accounts and enable instant transfers via mobile payments.",
    case1_li1: "Outcome: Lower cash-handling risk",
    case1_li2: "Challenge: Training & trust building",
    case1_li3: "Measure: % of wages paid digitally",
    case2_h: "Agent Networks Near Worksites",
    case2_p: "Expanding cash-in/out agents in clusters where migrants live or work, with multilingual UX.",
    case2_li1: "Outcome: Convenience & adoption",
    case2_li2: "Challenge: Agent liquidity & density",
    case2_li3: "Measure: Avg. distance to cash points",
    policy_title: "Policy Recommendations",
    pol_li1: "Allow tiered KYC with clear limits to enable quick onboarding.",
    pol_li2: "Strengthen interoperability for portability across states/providers.",
    pol_li3: "Mandate transparent pricing and accessible grievance redressal.",
    pol_li4: "Support multilingual financial literacy at worksites.",
    pol_li5: "Incentivize agent presence/liquidity in high-migrant areas.",
    resources_title: "Resources & Further Reading",
    faq_title: "FAQ",
    faq_q1: "Do migrants need permanent address proof to open accounts?",
    faq_a1: "Many jurisdictions allow simplified KYC for small-value accounts. Check latest local regulations and acceptable documents.",
    faq_q2: "How can remittance costs be reduced?",
    faq_a2: "Use interoperable digital rails, competition, transparent fees, and better agent liquidity management.",
    contact_title: "Feedback",
    contact_formspree_h: "Quick message (Formspree)",
    contact_name: "Full name",
    contact_name_err: "Please enter your name.",
    contact_email: "Email",
    contact_email_err: "Please enter a valid email.",
    contact_message: "Message",
    contact_message_err: "Please add a message.",
    contact_submit: "Send",
    contact_google_h: "Or use this Google Form",
    footer_proj: "Migrant Financial Inclusion – MBA Project",
    footer_stack: "Built with Bootstrap • Charts by Chart.js • Hosted on GitHub Pages"
  },
  /* Concise translations for key UI text */
  hi: {
    site_title: "प्रवासी श्रमिक & वित्तीय समावेशन",
    nav_why: "क्यों",
    nav_challenges: "चुनौतियाँ",
    nav_solutions: "समाधान",
    nav_data: "डेटा",
    nav_cases: "अध्ययन",
    nav_policy: "नीति",
    nav_resources: "स्रोत",
    nav_faq: "प्रश्न",
    nav_contact: "संपर्क",
    lang_label: "भाषा",
    hero_title: "प्रवासी श्रमिक & वित्तीय समावेशन",
    hero_sub: "बाधाएँ, डेटा और समाधान—सुरक्षित, सस्ती और पोर्टेबल सेवाएँ सक्षम करने हेतु।",
    hero_cta: "शुरू करें",
    hero_glance: "संक्षेप में",
    hero_pt1: "खाते व बचत",
    hero_pt2: "कम लागत प्रेषण",
    hero_pt3: "डिजिटल भुगतान व eKYC",
    hero_pt4: "वित्तीय साक्षरता व संरक्षण",
    why_title: "प्रवासी श्रमिकों के लिए वित्तीय समावेशन क्यों?",
    why_p: "प्रवासी स्थानीय अर्थव्यवस्था में योगदान देते हैं और प्रेषण भेजते हैं—समावेशन से लचीलापन व सुरक्षा बढ़ती है।",
    challenges_title: "प्रमुख चुनौतियाँ",
    solutions_title: "समाधान एवं नवाचार",
    data_title: "डेटा व दृश्यांकन",
    data_note: "चार्ट नवीनतम स्रोतों पर आधारित हैं।",
    data_disclaimer_h: "टिप्पणी:",
    data_disclaimer_p: "“केवल प्रवासी” खाताधारकों के राष्ट्रीय आँकड़े सीमित हैं, इसलिए तुलना बेंचमार्क से की गई है।",
    cases_title: "अध्ययन",
    policy_title: "नीति सिफारिशें",
    resources_title: "स्रोत व अतिरिक्त पठन",
    faq_title: "प्रश्न",
    contact_title: "प्रतिक्रिया",
    contact_formspree_h: "त्वरित संदेश (Formspree)",
    contact_name: "पूरा नाम",
    contact_name_err: "कृपया नाम दर्ज करें।",
    contact_email: "ईमेल",
    contact_email_err: "मान्य ईमेल दर्ज करें।",
    contact_message: "संदेश",
    contact_message_err: "कृपया संदेश लिखें।",
    contact_submit: "भेजें",
    contact_google_h: "या यह Google फ़ॉर्म भरें",
    footer_proj: "प्रवासी वित्तीय समावेशन – एमबीए प्रोजेक्ट",
    footer_stack: "Bootstrap, Chart.js, GitHub Pages"
  },
  ta: {
    site_title: "இடம்பெயர் தொழிலாளர்கள் & நிதி சேர்ப்பு",
    nav_why: "ஏன்",
    nav_challenges: "சவால்கள்",
    nav_solutions: "தீர்வுகள்",
    nav_data: "தரவு",
    nav_cases: "வழக்குக்கதைகள்",
    nav_policy: "கொள்கை",
    nav_resources: "ஆதாரங்கள்",
    nav_faq: "வினா",
    nav_contact: "தொடர்பு",
    lang_label: "மொழி",
    hero_title: "இடம்பெயர் தொழிலாளர்கள் & நிதி சேர்ப்பு",
    hero_sub: "தடைங்கள், தரவு & தீர்வுகள்—பாதுகாப்பான, மலிவு, இடமாற்றக் கூடிய சேவைகளுக்காக.",
    hero_cta: "தொடங்கவும்",
    hero_glance: "சுருக்கமாக",
    hero_pt1: "கணக்குகள் & சேமிப்பு",
    hero_pt2: "குறைந்த கட்டண பணஅனுப்பல்",
    hero_pt3: "டிஜிட்டல் கட்டணங்கள் & eKYC",
    hero_pt4: "நிதி அறிவாற்றல் & பாதுகாப்பு",
    why_title: "இடம்பெயர் தொழிலாளர்களுக்கு நிதி சேர்ப்பு ஏன்?",
    challenges_title: "முக்கிய சவால்கள்",
    solutions_title: "தீர்வுகள் & புதுமைகள்",
    data_title: "தரவு & காட்சிகள்",
    data_note: "வர்த்தமான மூலங்கள் அடிப்படையில் வரைபடங்கள்.",
    data_disclaimer_h: "கவனம்:",
    data_disclaimer_p: "‘மட்டும் இடம்பெயர்’ கணக்கு புள்ளிவிவரம் குறைவாக உள்ளதால், ஒப்பீடு அளவுகோல்களுடன் கொடுக்கப்பட்டுள்ளது.",
    cases_title: "வழக்குக்கதைகள்",
    policy_title: "கொள்கை பரிந்துரைகள்",
    resources_title: "ஆதாரங்கள்",
    faq_title: "அடிக்கடி கேட்கப்படும் கேள்விகள்",
    contact_title: "கருத்து",
    contact_formspree_h: "விரைவுச் செய்தி (Formspree)",
    contact_name: "முழுப் பெயர்",
    contact_name_err: "பெயரை உள்ளிடவும்.",
    contact_email: "மின்னஞ்சல்",
    contact_email_err: "சரியான மின்னஞ்சலை உள்ளிடவும்.",
    contact_message: "செய்தி",
    contact_message_err: "செய்தியை உள்ளிடவும்.",
    contact_submit: "அனுப்பவும்",
    contact_google_h: "அல்லது Google Form பயன்படுத்தவும்",
    footer_proj: "இடம்பெயர் நிதி சேர்ப்பு – எம்பிஏ திட்டம்",
    footer_stack: "Bootstrap, Chart.js, GitHub Pages"
  }
};
/* Apply localization */
function applyLang(lang) {
  const dict = i18n[lang] || i18n.en;
  document.documentElement.lang = lang;
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (dict[key]) el.textContent = dict[key];
  });
  localStorage.setItem("lang", lang);
}
/* Nav language buttons */
document.addEventListener("DOMContentLoaded", () => {
  localStorage.setItem("lang", "en");
  applyLang("en");
  document.querySelectorAll(".lang-btn").forEach(btn => {
    btn.addEventListener("click", () => applyLang(btn.dataset.lang));
  });
});
/* Year in footer */
document.addEventListener("DOMContentLoaded", () => {
  const y = document.getElementById("year");
  if (y) y.textContent = new Date().getFullYear();
});
/* Bootstrap client-side validation */
(() => {
  'use strict';
  const forms = document.querySelectorAll('.needs-validation');
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  });
})();
/* Charts (using research values) */
document.addEventListener("DOMContentLoaded", () => {
  const accountsCtx = document.getElementById("chartAccounts");
  const remittanceCtx = document.getElementById("chartRemittance");
  // Bar: Account ownership (% adults), 2024
  // Source: World Bank Global Findex 2024 (FX.OWN.TOTL.ZS): India 89.02; South Asia 83.89; World 78.74
  if (accountsCtx) {
    new Chart(accountsCtx, {
      type: "bar",
      data: {
        labels: ["India", "South Asia", "World"],
        datasets: [{
          label: "Account Ownership (%)",
          data: [89.02, 83.89, 78.74],
          backgroundColor: ["#0d6efd", "#20c997", "#6c757d"]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true },
          tooltip: { mode: "index", intersect: false }
        },
        scales: {
          y: { beginAtZero: true, max: 100, title: { display: true, text: "%" } }
        }
      }
    });
  }
  // Line: Global average remittance cost (% of US$200) – selected points
  // 2019 Q1 ~7.0; 2020 Q4 6.51; 2023 Q4 6.39; 2024 Q2 6.65; 2025 Q1 6.49 (World Bank RPW)
  if (remittanceCtx) {
    new Chart(remittanceCtx, {
      type: "line",
      data: {
        labels: ["2019 Q1", "2020 Q4", "2023 Q4", "2024 Q2", "2025 Q1"],
        datasets: [{
          label: "Global Average Remittance Cost (%)",
          data: [7.0, 6.51, 6.39, 6.65, 6.49],
          borderColor: "#0d6efd",
          backgroundColor: "rgba(13,110,253,.15)",
          tension: 0.25,
          fill: true
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true },
          tooltip: { mode: "index", intersect: false }
        },
        scales: {
          y: { beginAtZero: false, title: { display: true, text: "%" } }
        }
      }
    });
  }
});